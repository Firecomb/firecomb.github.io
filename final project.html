

<!DOCTYPE html>
<head>
	<meta name="viewport" content="initial-scale=1,user-scalable=no">
	<title>synthesis.js - MIDI / MML Synthesizer</title>
	<link  href='final.css' rel='stylesheet'>
	<script src="nexusUI.js"></script>
	<script src="synth.js"></script>
	<script src="delay.js"></script>
	<script src="reverb.js"></script>
	<script src="final.js"></script>
	
</head>
<body>
	
	<header>
		<h1>synthesis.js - MIDI / MML Synthesizer (WIP)</h1>
		<p>Web Audio API and Web MIDI API experiment works on Chrome, Edge and iOS Safari.<br>
		The features are very limited for now. Currently you can:</p>
		<p>- play with MIDI keyboard<br>
		- play with PC keys (C key = C4, Space = Damper pedal)<br>
		- play simple MML<br>
		- play test SMF</p>
	</header>
	
	<div id="dummy">
	<p class="panelLabel"> CTP431 Synth </p>
	</div>

	<div id="osc">
	<p class="panelLabel"> Oscillator </p>
	<canvas nx="dial" id="gui_lfo_rate" height="120" width="80" label="LFO rate"> </canvas> 
	<canvas nx="dial" id="gui_lfo_depth" height="120" width="80" label="LFO depth"> </canvas> 
	</div>

	<div id="filter">
	<p class="panelLabel"> Filter </p>
	<canvas nx="dial" id="gui_filter_freq" height="120" width="80" label="Cut-off"> </canvas> 
	<canvas nx="dial" id="gui_filter_env_attack" height="120" width="80" label="Attack"> </canvas> 
	<canvas nx="dial" id="gui_filter_env_decay" height="120" width="80" label="Decay"> </canvas> 
	<canvas nx="dial" id="gui_filter_env_sustain" height="120" width="80" label="Sustain"> </canvas> 
	<canvas nx="dial" id="gui_filter_env_release" height="120" width="80" label="Release"> </canvas> 
	</div>

	<div id="ampEnv">
	<p class="panelLabel"> Amp Envelope </p>
	<canvas nx="dial" id="gui_amp_env_attack" height="120" width="80" label="Attack"> </canvas> 
	<canvas nx="dial" id="gui_amp_env_decay" height="120" width="80" label="Decay"> </canvas> 
	<canvas nx="dial" id="gui_amp_env_sustain" height="120" width="80" label="Sustain"> </canvas> 
	<canvas nx="dial" id="gui_amp_env_release" height="120" width="80" label="Release"> </canvas> 
	</div>
	<br>

	<div id="delay">
	<p class="panelLabel"> Feedback Delay </p>
	<canvas nx="dial" id="gui_delay_time" height="120" width="80" label="Time"> </canvas> 
	<canvas nx="dial" id="gui_delay_gain" height="120" width="80" label="Gain"> </canvas> 
	<canvas nx="dial" id="gui_delay_wet_dry" height="120" width="80" label="Wet/Dry"> </canvas> 
	</div>

	<div id="reverb">
	<p class="panelLabel"> Reverb </p>
	<canvas nx="dial" id="gui_reverb_wet_dry" height="120" width="80" label="Wet/Dry"> </canvas> 
	</div>

	<br>
	<div id="keys">
	<canvas nx="keyboard" id="gui_keyboard"  height="150" width="750"></canvas>
	</div>

	
	<div class="rack" id="virtual-keyboard">
		<h2>Keyboard</h2>
		<div id="keyboard">
		</div>
	</div>
		
	<div class="rack" id="mml2smf">
		<h2>MML2SMF</h2>
		<textarea id="mml" type="text" spellcheck="false" style="width: 100%" rows="8" wrap="off">t140 o5l8q7 ccggaag4 ffeeddc4; o4l8 cgegcgeg >b<gfg>b<gc4</textarea><br>
		<button onclick="playMML();">Play</button> <!--button onclick="tweetMML();">Tweet MML</button--> <button onclick="downloadMIDIFile('mml2smf.mid');">Download MIDI File</button>
			
		<div class="instruction">
			<h3>MML Commands</h3>
			<table style="border-spacing: 20px 0;">
				<tr><td>Notes<td>c, d, e, f, g, a, b, +, -
				<tr><td>Octave<td>o[octave], &lt;, &gt; (4)
				<tr><td>Note Length<td>l[note length] (4)
				<tr><td>Tempo<td>t[tempo] (120)
				<tr><td>Gate Time<td>q[1-8] (6)
				<tr><td>Velocity<td>u[0-127] (100)
				<tr><td>Channel Volume<td>v[0-127] (100)
				<tr><td>Pan<td>p[-64-63] (0)
				<tr><td>Expression Controller<td>E[0-127] (127)
				<tr><td>Key Shift<td>k[-127-127] (0)
				<tr><td>Set MIDI Channel<td>C[1-16] (1)
				<tr><td>Next Track and MIDI Channel<td>;
				<tr><td>Tie<td>^
				<tr><td>Play from Here<td>?
				<tr><td>Comment<td>//..., /*...*/
			</table>
		</div>
	</div>
		
	

	
</body>

<script src="synthesis.js"></script>
<script src="showcase.js"></script>
